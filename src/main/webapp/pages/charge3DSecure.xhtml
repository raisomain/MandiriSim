<ui:composition 
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	template="/templates/template.xhtml">

	<ui:define name="metadata">
	</ui:define>

	<ui:define name="content">
		<h:form>
			<p:panel header="Charge 3D Secure">
				<h:panelGrid columns="2" cellpadding="4">
					<h:outputText value="Token Id" />
					<h:outputText value="#{charge3DSecure.tokenId}" />
					<h:outputText value="Order Id" />
					<p:inputText value="#{charge3DSecure.orderId}" />
					<h:outputText value="FirstName" />
					<p:inputText value="#{charge3DSecure.firstName}" />
					<h:outputText value="Last Name" />
					<p:inputText value="#{charge3DSecure.lastName}" />
					<h:outputText value="Phone" />
					<p:inputText value="#{charge3DSecure.phone}" />
					<h:outputText value="E-Mail" />
					<p:inputText value="#{charge3DSecure.eMail}" />
					<h:outputText value="Address" />
					<p:inputText value="#{charge3DSecure.address}" />
					<h:outputText value="City" />
					<p:inputText value="#{charge3DSecure.city}" />
					<h:outputText value="Postal Code" />
					<p:inputText value="#{charge3DSecure.postalCode}" />
					<h:outputText value="Gross Amount" />
					<h:outputText value="#{charge3DSecure.grossAmount}" id="amount"/>
				</h:panelGrid>

				<p:commandButton value="new item" oncomplete="PF('itemDialog').show()" />
				
				<p:dataTable id="datatable" var="item" value="#{charge3DSecure.items}">
					<p:column headerText="Id">
						<h:outputText value="#{item.id}" />
					</p:column>
					<p:column headerText="Price">
						<h:outputText value="#{item.price}" />
					</p:column>
					<p:column headerText="Quantity">
						<h:outputText value="#{item.quantity}" />
					</p:column>
					<p:column headerText="Name">
						<h:outputText value="#{item.name}" />
					</p:column>
				</p:dataTable>
				<br/>
				<p:commandButton value="Submit" update="output" action="#{charge3DSecure.command()}" />

				<p:dialog header="new item" widgetVar="itemDialog" resizable="false">
					<p:outputPanel id="itemDetail">
						<h:panelGrid columns="2" columnClasses="label,value"  cellpadding="2">
							<h:outputText value="Id" />
							<h:inputText value="#{charge3DSecure.item.id}" />
							<h:outputText value="Price" />
							<h:inputText value="#{charge3DSecure.item.price}" />
							<h:outputText value="Quantity" />
							<h:inputText value="#{charge3DSecure.item.quantity}" />
							<h:outputText value="Name" />
							<h:inputText value="#{charge3DSecure.item.name}" />
						</h:panelGrid>
						<p:commandButton onclick="PF('itemDialog').close()" value="save item" 
							actionListener="#{charge3DSecure.addItem()}" update="amount"/>
					</p:outputPanel>
				</p:dialog>
			</p:panel>
			
			
			
			<p:panel header="Output">
				<pre>
                <h:inputTextarea id="output" style="border:none;" cols="70" rows="15" 
						readonly="true" value="#{charge3DSecure.output}"/>
            	</pre>
			</p:panel>
		</h:form>
	</ui:define>
</ui:composition>